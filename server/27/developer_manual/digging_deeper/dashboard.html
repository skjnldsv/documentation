<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard &mdash; Nextcloud latest Developer Manual latest documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reference providers" href="reference.html" />
    <link rel="prev" title="User management" href="users.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo-white.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../prologue/index.html">Prologue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/index.html">Basic concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app_development/index.html">App development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Core development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Digging deeper</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api.html">API reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="classloader.html">Classloader</a></li>
<li class="toctree-l2"><a class="reference internal" href="continuous_integration.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="email.html">Email</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow.html">Nextcloud Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="http_client.html">HTTP Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="javascript-apis.html">JavaScript APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="npm.html">NPM</a></li>
<li class="toctree-l2"><a class="reference internal" href="notifications.html">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.html">Performance considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="psr.html">PSR</a></li>
<li class="toctree-l2"><a class="reference internal" href="publicpage.html">Public Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="repair.html">Repair steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest_apis.html">REST APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="search.html">Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="speech-to-text.html">Speech-To-Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="talk.html">Talk Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="translation.html">Machine Translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="text_processing.html">Text Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="two-factor-provider.html">Two-factor providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="users.html">User management</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Dashboard</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#register-a-dashboard-widget">Register a dashboard widget</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-iconditionalwidget-interface">The IConditionalWidget interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#provide-a-user-interface">Provide a user interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dashboard-api">Dashboard API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#render-dashboard-widgets-using-the-api">Render dashboard widgets using the API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#providing-widgets-to-clients">Providing widgets to clients</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-ibuttonwidget-interface">The IButtonWidget interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-iiconwidget-interface">The IIconWidget interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-ioptionwidget-interface">The IOptionWidget interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-iapiwidget-interface">The IAPIWidget interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-iapiwidgetv2-interface">The IAPIWidgetV2 interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-ireloadablewidget-interface">The IReloadableWidget interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#use-the-api">Use the API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference.html">Reference providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="projects.html">Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="groupware/index.html">Groupware integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_host_metadata.html">Web Host Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="status.html">User Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html">Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_migration.html">User migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="profiler.html">Profiler</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../app_publishing_maintenance/index.html">App publishing and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Nextcloud design guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../html_css_design/index.html">HTML/CSS guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client_apis/index.html">Clients and Client APIs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nextcloud latest Developer Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Digging deeper</a></li>
      <li class="breadcrumb-item active">Dashboard</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/nextcloud/documentation/edit/master/developer_manual/digging_deeper/dashboard.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="dashboard">
<h1>Dashboard<a class="headerlink" href="#dashboard" title="Permalink to this headline"></a></h1>
<p>The dashboard app aims to provide the user with a general overview of their
Nextcloud and shows information that is currently important.</p>
<p>App developers can integrate into the dashboard app and provide their own widgets.</p>
<section id="register-a-dashboard-widget">
<h2>Register a dashboard widget<a class="headerlink" href="#register-a-dashboard-widget" title="Permalink to this headline"></a></h2>
<p>A dashboard widget is represented by a class implementing the <cite>OCP\Dashboard\IWidget</cite>
interface. This class will be instantiated whenever the dashboard is loaded.
Any bootstrap code that is needed for the widget can be implemented inside
of the <cite>load</cite> method and will be called when the dashboard is loaded.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">OCA\MyApp\Dashboard</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">OCP\Dashboard\IWidget</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\IInitialStateService</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\IL10N</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\IURLGenerator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\IUserSession</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyAppWidget</span> <span class="k">implements</span> <span class="nx">IWidget</span> <span class="p">{</span>
    <span class="k">private</span> <span class="nx">IInitialStateService</span> <span class="nv">$initialStateService</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">IL10N</span> <span class="nv">$l10n</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">IURLGenerator</span> <span class="nv">$urlGenerator</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span>
        <span class="nx">IInitialStateService</span> <span class="nv">$initialStateService</span><span class="p">,</span>
        <span class="nx">IL10N</span> <span class="nv">$l10n</span><span class="p">,</span>
        <span class="nx">IURLGenerator</span> <span class="nv">$urlGenerator</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">initialStateService</span> <span class="o">=</span> <span class="nv">$initialStateService</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">l10n</span> <span class="o">=</span> <span class="nv">$l10n</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">urlGenerator</span> <span class="o">=</span> <span class="nv">$urlGenerator</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @return string Unique id that identifies the widget, e.g. the app id</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getId</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;myappwidgetid&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @return string User facing title of the widget</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getTitle</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">l10n</span><span class="o">-&gt;</span><span class="na">t</span><span class="p">(</span><span class="s1">&#39;My app&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @return int Initial order for widget sorting</span>
<span class="sd">     *   in the range of 10-100, 0-9 are reserved for shipped apps</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getOrder</span><span class="p">()</span><span class="o">:</span> <span class="nx">int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @return string css class that displays an icon next to the widget title</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getIconClass</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;icon-class&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @return string|null The absolute url to the apps own view</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getUrl</span><span class="p">()</span><span class="o">:</span> <span class="o">?</span><span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">urlGenerator</span><span class="o">-&gt;</span><span class="na">linkToRouteAbsolute</span><span class="p">(</span><span class="s1">&#39;myapp.view.index&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Execute widget bootstrap code like loading scripts and providing initial state</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">load</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">initialStateService</span><span class="o">-&gt;</span><span class="na">provideInitialState</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">,</span> <span class="s1">&#39;myData&#39;</span><span class="p">,</span> <span class="p">[]);</span>
        <span class="nx">\OCP\Util</span><span class="o">::</span><span class="na">addScript</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">,</span> <span class="s1">&#39;dashboard&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <cite>MyAppWidget</cite> class needs to be registered during the <a class="reference internal" href="../app_development/bootstrap.html#bootstrapping"><span class="std std-ref">app bootstrap</span></a>.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>

<span class="k">namespace</span> <span class="nx">OCA\MyApp\AppInfo</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">OCP\AppFramework\App</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\AppFramework\Bootstrap\IBootContext</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\AppFramework\Bootstrap\IBootstrap</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\AppFramework\Bootstrap\IRegistrationContext</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCA\MyApp\Dashboard\MyAppWidget</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Application</span> <span class="k">extends</span> <span class="nx">App</span> <span class="k">implements</span> <span class="nx">IBootstrap</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">const</span> <span class="no">APP_ID</span> <span class="o">=</span> <span class="s1">&#39;myapp&#39;</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="k">array</span> <span class="nv">$urlParams</span> <span class="o">=</span> <span class="p">[])</span> <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="na">APP_ID</span><span class="p">,</span> <span class="nv">$urlParams</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">register</span><span class="p">(</span><span class="nx">IRegistrationContext</span> <span class="nv">$context</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{</span>
        <span class="nv">$context</span><span class="o">-&gt;</span><span class="na">registerDashboardWidget</span><span class="p">(</span><span class="nx">MyAppWidget</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">boot</span><span class="p">(</span><span class="nx">IBootContext</span> <span class="nv">$context</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For compatibility reasons the widget registration can also be performed by
listening to the <cite>OCP\Dashboard\RegisterWidgetEvent</cite> for apps that still
need to support older versions where the new app boostrap flow is not available,
however this method is deprecated and will be removed once Nextcloud 19 is EOL.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">OCP\Dashboard\RegisterWidgetEvent</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\EventDispatcher\IEventDispatcher</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Application</span> <span class="k">extends</span> <span class="nx">App</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="k">array</span> <span class="nv">$urlParams</span> <span class="o">=</span> <span class="p">[])</span> <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="na">APP_ID</span><span class="p">,</span> <span class="nv">$urlParams</span><span class="p">);</span>
        <span class="nv">$container</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getContainer</span><span class="p">();</span>

        <span class="sd">/** @var IEventDispatcher $dispatcher */</span>
        <span class="nv">$dispatcher</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">getServer</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">IEventDispatcher</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
        <span class="nv">$dispatcher</span><span class="o">-&gt;</span><span class="na">addListener</span><span class="p">(</span><span class="nx">RegisterWidgetEvent</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RegisterWidgetEvent</span> <span class="nv">$event</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$container</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{</span>
                <span class="nx">\OCP\Util</span><span class="o">::</span><span class="na">addScript</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">,</span> <span class="s1">&#39;dashboard&#39;</span><span class="p">);</span>
                <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">registerWidget</span><span class="p">(</span><span class="nx">MyAppWidget</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="the-iconditionalwidget-interface">
<h3>The IConditionalWidget interface<a class="headerlink" href="#the-iconditionalwidget-interface" title="Permalink to this headline"></a></h3>
<p>The IConditionalWidget interface adds the <strong>isEnabled</strong> method to provide the option for a widget to opt-out later.
While registering the widget the information whether or not a widget should be displayed to the specific user might
not be available or to complex to calculate up front. In this case the IConditionalWidget allows you to check the
conditions only when really needed.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">isEnabled</span><span class="p">()</span><span class="o">:</span> <span class="nx">bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="provide-a-user-interface">
<h2>Provide a user interface<a class="headerlink" href="#provide-a-user-interface" title="Permalink to this headline"></a></h2>
<p>The user interface can be registered through the public <cite>OCA.Dashboard.register</cite>
JavaScript method. The first parameter represents the widget id that has already
been specified in the <cite>IWidget</cite> implementation. The callback parameter will be
called to render the widget in the frontend. The user interface can be added to
the provided DOM element <cite>el</cite>.</p>
<p>The following example shows how a Vue.js component could be used to render the
widget user interface, however this approach works for any other framework as well
as plain JavaScript:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nx">Dashboard</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./components/Dashboard.vue&#39;</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">OCA</span><span class="p">.</span><span class="nx">Dashboard</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">&#39;myappwidgetid&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">el</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">View</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Vue</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Dashboard</span><span class="p">)</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">vm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">View</span><span class="p">({</span>
<span class="w">            </span><span class="nx">propsData</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nx">store</span><span class="p">,</span>
<span class="w">        </span><span class="p">}).</span><span class="nx">$mount</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
<section id="dashboard-api">
<h2>Dashboard API<a class="headerlink" href="#dashboard-api" title="Permalink to this headline"></a></h2>
<section id="render-dashboard-widgets-using-the-api">
<h3>Render dashboard widgets using the API<a class="headerlink" href="#render-dashboard-widgets-using-the-api" title="Permalink to this headline"></a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 27.1.</span></p>
</div>
<p>Dashboard widgets can be rendered in the browser using the dashboard API. This allows to render
widgets without any JavaScript and frontend code. This new method is beneficial for performance as
the widgets are rendered from API data using a generic vue.js component provided by the Dashboard
app.</p>
<p>To render a widget using the new API, you need to implement the
<a class="reference internal" href="#iapiwidgetv2"><span class="std std-ref">OCP\Dashboard\IAPIWidgetV2</span></a> interface. Optionally, you may implement the
<a class="reference internal" href="#ireloadablewidget"><span class="std std-ref">OCP\Dashboard\IReloadableWidget</span></a> interface to have the widget reload
periodically.</p>
</section>
<section id="providing-widgets-to-clients">
<h3>Providing widgets to clients<a class="headerlink" href="#providing-widgets-to-clients" title="Permalink to this headline"></a></h3>
<p>To provide more information about your widget through the dashboard API for clients, you can implement
those additional interfaces:</p>
<ul class="simple">
<li><p>IButtonWidget to add buttons to be rendered by the client in the widget</p></li>
<li><p>IIconWidget to set the widget icon URL</p></li>
<li><p>IOptionWidget to set additional options</p></li>
<li><p>IAPIWidget to actually provide the widget content (the item list)</p></li>
</ul>
</section>
<section id="the-ibuttonwidget-interface">
<h3>The IButtonWidget interface<a class="headerlink" href="#the-ibuttonwidget-interface" title="Permalink to this headline"></a></h3>
<p>The IButtonWidget interface adds the <strong>getWidgetButtons</strong> method to provide a list of buttons
to be displayed by the clients in the widget.
Those buttons let you define actions that can be triggered from the widget in the clients.</p>
<p>There are 3 types of buttons:</p>
<ul class="simple">
<li><p>WidgetButton::TYPE_NEW To let users create new elements in your app</p></li>
<li><p>WidgetButton::TYPE_MORE To let users see more information</p></li>
<li><p>WidgetButton::TYPE_SETUP If the widget requires some configuration</p></li>
</ul>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">getWidgetButtons</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$userId</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
                <span class="k">new</span> <span class="nx">WidgetButton</span><span class="p">(</span>
                        <span class="nx">WidgetButton</span><span class="o">::</span><span class="na">TYPE_NEW</span><span class="p">,</span>
                        <span class="s1">&#39;https://somewhere.org&#39;</span><span class="p">,</span>
                        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">l10n</span><span class="o">-&gt;</span><span class="na">t</span><span class="p">(</span><span class="s1">&#39;Create new element&#39;</span><span class="p">)</span>
                <span class="p">),</span>
                <span class="k">new</span> <span class="nx">WidgetButton</span><span class="p">(</span>
                        <span class="nx">WidgetButton</span><span class="o">::</span><span class="na">TYPE_MORE</span><span class="p">,</span>
                        <span class="s1">&#39;https://my.nextcloud.org/apps/your-app/&#39;</span><span class="p">,</span>
                        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">l10n</span><span class="o">-&gt;</span><span class="na">t</span><span class="p">(</span><span class="s1">&#39;More notifications&#39;</span><span class="p">)</span>
                <span class="p">),</span>
                <span class="k">new</span> <span class="nx">WidgetButton</span><span class="p">(</span>
                        <span class="nx">WidgetButton</span><span class="o">::</span><span class="na">TYPE_SETUP</span><span class="p">,</span>
                        <span class="s1">&#39;https://my.nextcloud.org/apps/settings/user&#39;</span><span class="p">,</span>
                        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">l10n</span><span class="o">-&gt;</span><span class="na">t</span><span class="p">(</span><span class="s1">&#39;Configure&#39;</span><span class="p">)</span>
                <span class="p">),</span>
        <span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="the-iiconwidget-interface">
<h3>The IIconWidget interface<a class="headerlink" href="#the-iiconwidget-interface" title="Permalink to this headline"></a></h3>
<p>The IIconWidget interface adds the <strong>getIconUrl</strong> method to provide the URL to the widget icon. In the following example
it returns the URL to the img/app.svg file in your app.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">getIconUrl</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">urlGenerator</span><span class="o">-&gt;</span><span class="na">getAbsoluteURL</span><span class="p">(</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">urlGenerator</span><span class="o">-&gt;</span><span class="na">imagePath</span><span class="p">(</span><span class="nx">Application</span><span class="o">::</span><span class="na">APP_ID</span><span class="p">,</span> <span class="s1">&#39;app.svg&#39;</span><span class="p">)</span>
        <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="the-ioptionwidget-interface">
<h3>The IOptionWidget interface<a class="headerlink" href="#the-ioptionwidget-interface" title="Permalink to this headline"></a></h3>
<p>The IOptionWidget interface adds the <strong>getWidgetOptions</strong> method to provide additional widget options. It returns
a WidgetOptions object which only contains the <strong>roundItemIcons</strong> boolean value for now. This tells the clients if
the widget item icons should be rounded or kept as squares.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">getWidgetOptions</span><span class="p">()</span><span class="o">:</span> <span class="nx">WidgetOptions</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">WidgetOptions</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="the-iapiwidget-interface">
<h3>The IAPIWidget interface<a class="headerlink" href="#the-iapiwidget-interface" title="Permalink to this headline"></a></h3>
<p>If you want your widget content to be accessible with the dashboard API for Nextcloud clients,
it must implement the <cite>OCP\Dashboard\IAPIWidget</cite> interface rather than <cite>OCP\Dashboard\IWidget</cite>.
This interface contains an extra <cite>getItems</cite> method which returns an array of <cite>OCP\DashboardModel\WidgetItem</cite> objects.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd">* @inheritDoc</span>
<span class="sd">*/</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">getItems</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$userId</span><span class="p">,</span> <span class="o">?</span><span class="nx">string</span> <span class="nv">$since</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nx">int</span> <span class="nv">$limit</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">myService</span><span class="o">-&gt;</span><span class="na">getWidgetItems</span><span class="p">(</span><span class="nv">$userId</span><span class="p">,</span> <span class="nv">$since</span><span class="p">,</span> <span class="nv">$limit</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p id="widgetitem"><cite>OCP\DashboardModel\WidgetItem</cite> contains the item information. Its constructor is:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$title</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="nx">string</span> <span class="nv">$subtitle</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="nx">string</span> <span class="nv">$link</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="nx">string</span> <span class="nv">$iconUrl</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="nx">string</span> <span class="nv">$sinceId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>title: The main widget text content</p></li>
<li><p>subtitle: The secondary text content</p></li>
<li><p>link: A link to the target resource</p></li>
<li><p>iconUrl: URL to a square icon (svg or jpg/png of at least 44x44px)</p></li>
<li><p>sinceId: Item ID or timestamp. The client will then send the latest known sinceId in next dashboard API request.</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">New in version 27.1.</span></p>
</div>
<ul class="simple">
<li><p>overlayIconUrl: Small overlay icon to show in the bottom right corner of <cite>iconUrl</cite>. This is used
by the activity widget to show the activity type icon.</p></li>
</ul>
</section>
<section id="the-iapiwidgetv2-interface">
<span id="iapiwidgetv2"></span><h3>The IAPIWidgetV2 interface<a class="headerlink" href="#the-iapiwidgetv2-interface" title="Permalink to this headline"></a></h3>
<p>If you want to render a widget in the browser using this API you must implement the
<cite>OCP\Dashboard\IAPIWidgetV2</cite> interface. The widget registration does not change compared to the
old method. The type of a widget will be detected automatically during the registration. When
migrating old, JavaScript based widgets the <strong>load</strong> method should be left empty.</p>
<p>This interface adds a single method <strong>getItemsV2</strong> which returns
<cite>OCP\Dashboard\Model\WidgetItems</cite>.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * @inheritDoc</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">getItemsV2</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$userId</span><span class="p">,</span> <span class="o">?</span><span class="nx">string</span> <span class="nv">$since</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nx">int</span> <span class="nv">$limit</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)</span><span class="o">:</span> <span class="nx">WidgetItems</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">myService</span><span class="o">-&gt;</span><span class="na">getWidgetItemsV2</span><span class="p">(</span><span class="nv">$userId</span><span class="p">,</span> <span class="nv">$since</span><span class="p">,</span> <span class="nv">$limit</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><cite>OCP\DashboardModel\WidgetItems</cite> contains the all items and additional meta information to
render the widget. Its constructor is:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span>
    <span class="k">private</span> <span class="k">array</span> <span class="nv">$items</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="k">private</span> <span class="nx">string</span> <span class="nv">$emptyContentMessage</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">string</span> <span class="nv">$halfEmptyContentMessage</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>items: An array of <a class="reference internal" href="#widgetitem"><span class="std std-ref">OCP\DashboardModel\WidgetItem</span></a>.</p></li>
<li><p>emptyContentMessage: The message to show if no items are available.</p></li>
<li><p>halfEmptyContentMessage: An optional message to show above the item list. This is useful if there
are no important items but you still want to show some items to the user. Have a look at the
following example from the Talk app:</p></li>
</ul>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/talk-widget-half-empty-content.png"><img alt="../_images/talk-widget-half-empty-content.png" src="../_images/talk-widget-half-empty-content.png" style="width: 40%;" /></a>
</figure>
<p>Here is a full example of a widget that implements the <cite>OCP\Dashboard\IAPIWidgetV2</cite> interface:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">class</span> <span class="nc">MyWidget</span> <span class="k">implements</span> <span class="nx">IButtonWidget</span><span class="p">,</span> <span class="nx">IIconWidget</span><span class="p">,</span> <span class="nx">IReloadableWidget</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span>
        <span class="k">private</span> <span class="nx">IL10N</span> <span class="nv">$l10n</span><span class="p">,</span>
        <span class="k">private</span> <span class="nx">IURLGenerator</span> <span class="nv">$urlGenerator</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getId</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;blazinglyfast&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getTitle</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">l10n</span><span class="o">-&gt;</span><span class="na">t</span><span class="p">(</span><span class="s1">&#39;My blazingly fast widget&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getOrder</span><span class="p">()</span><span class="o">:</span> <span class="nx">int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getIconClass</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;icon-class&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getIconUrl</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">urlGenerator</span><span class="o">-&gt;</span><span class="na">getAbsoluteURL</span><span class="p">(</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">urlGenerator</span><span class="o">-&gt;</span><span class="na">imagePath</span><span class="p">(</span><span class="s1">&#39;blazinglyfast&#39;</span><span class="p">,</span> <span class="s1">&#39;icon.svg&#39;</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getUrl</span><span class="p">()</span><span class="o">:</span> <span class="o">?</span><span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">urlGenerator</span><span class="o">-&gt;</span><span class="na">linkToRouteAbsolute</span><span class="p">(</span><span class="s1">&#39;blazinglyfast.view.index&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">load</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{</span>
        <span class="c1">// No need to provide initial state or inject javascript code anymore</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getItemsV2</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$userId</span><span class="p">,</span> <span class="o">?</span><span class="nx">string</span> <span class="nv">$since</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nx">int</span> <span class="nv">$limit</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)</span><span class="o">:</span> <span class="nx">WidgetItems</span> <span class="p">{</span>
        <span class="c1">// TODO</span>
        <span class="nv">$items</span> <span class="o">=</span> <span class="p">[</span><span class="cm">/* fancy items */</span><span class="p">];</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">WidgetItems</span><span class="p">(</span>
            <span class="nv">$items</span><span class="p">,</span>
            <span class="k">empty</span><span class="p">(</span><span class="nv">$items</span><span class="p">)</span> <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">l10n</span><span class="o">-&gt;</span><span class="na">t</span><span class="p">(</span><span class="s1">&#39;No items&#39;</span><span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getWidgetButtons</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$userId</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="k">new</span> <span class="nx">WidgetButton</span><span class="p">(</span>
                <span class="nx">WidgetButton</span><span class="o">::</span><span class="na">TYPE_MORE</span><span class="p">,</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">urlGenerator</span><span class="o">-&gt;</span><span class="na">linkToRouteAbsolute</span><span class="p">(</span><span class="s1">&#39;blazinglyfast.view.index&#39;</span><span class="p">),</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">l10n</span><span class="o">-&gt;</span><span class="na">t</span><span class="p">(</span><span class="s1">&#39;More items&#39;</span><span class="p">),</span>
            <span class="p">),</span>
        <span class="p">];</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getReloadInterval</span><span class="p">()</span><span class="o">:</span> <span class="nx">int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">60</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="the-ireloadablewidget-interface">
<span id="ireloadablewidget"></span><h3>The IReloadableWidget interface<a class="headerlink" href="#the-ireloadablewidget-interface" title="Permalink to this headline"></a></h3>
<p>The IReloadableWidget interface adds the <strong>getReloadInterval</strong> method to provide a periodic reload
interval in seconds. New items will be requested from the OCS API after this interval to refresh
the widget. Internally, the <strong>getItemsV2</strong> method will be called to get the new items.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">getReloadInterval</span><span class="p">()</span><span class="o">:</span> <span class="nx">int</span> <span class="p">{</span>
    <span class="c1">// Reload data every minute</span>
    <span class="k">return</span> <span class="mi">60</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This interface requires a widget to implement the <cite>OCP\Dashboard\IAPIWidgetV2</cite> interface and won’t work with old widgets.</p>
</div>
</section>
<section id="use-the-api">
<h3>Use the API<a class="headerlink" href="#use-the-api" title="Permalink to this headline"></a></h3>
<p>The list of enabled widgets can be requested like that:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-u<span class="w"> </span>user:passwd<span class="w"> </span>https://my.nextcloud.org/ocs/v2.php/apps/dashboard/api/v1/widgets<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-H<span class="w"> </span><span class="s2">&quot;Accept: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-X<span class="w"> </span>GET
</pre></div>
</div>
<p>Example response:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;ocs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;statuscode&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OK&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;spreed&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;spreed&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Talk mentions&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;icon_class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dashboard-talk-icon&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;icon_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/apps/spreed/img/app-dark.svg&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;widget_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/index.php/apps/spreed/&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;item_icons_round&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;buttons&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;more&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;More unread mentions&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;link&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/index.php/apps/spreed/&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;github_notifications&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;github_notifications&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GitHub notifications&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;icon_class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;icon-github&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;icon_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/apps/integration_github/img/app-dark.svg&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;widget_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/index.php/settings/user/connected-accounts&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;item_icons_round&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;buttons&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;more&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;More notifications&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;link&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://github.com/notifications&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The items list for each enabled widgets can be requested like that:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-u<span class="w"> </span>user:passwd<span class="w"> </span>http://my.nc/ocs/v2.php/apps/dashboard/api/v1/widget-items<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-H<span class="w"> </span>Content-Type:application/json<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-X<span class="w"> </span>GET<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;sinceIds&quot;:{&quot;myappwidgetid&quot;:&quot;2021-03-22T15:01:10Z&quot;,&quot;my_other_appwidgetid&quot;:&quot;333&quot;}}&#39;</span>
</pre></div>
</div>
<p>If your client periodically gets widget items content with this API,
include the latest <cite>sinceId</cite> for each widget to avoid getting the items you already have.</p>
<p>Example response:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;ocs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;meta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;statuscode&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OK&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;github_notifications&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;subtitle&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nextcloud-docker-dev#87&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Improve getting started&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;link&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://github.com/juliushaertl/nextcloud-docker-dev/pull/87&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;iconUrl&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/index.php/apps/integration_github/avatar/juliushaertl&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;sinceId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-10-13T12:34:19Z&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;subtitle&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integration_github&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;v1.0.11&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;link&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://github.com/nextcloud/integration_github/releases&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;iconUrl&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/index.php/apps/integration_github/avatar/nextcloud&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;sinceId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-10-13T12:32:04Z&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;subtitle&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text#3209&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Rich workspaces: If there is no Readme.md, don’t show editor placeholder but move into \&quot;+\&quot; menu&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;link&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://github.com/nextcloud/text/issues/3209&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;iconUrl&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/index.php/apps/integration_github/avatar/nextcloud&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;sinceId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-10-13T12:14:39Z&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;spreed&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;subtitle&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;- Send chat messages without notifying the recipients in case it is not urgent&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Talk updates ✅&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;link&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/index.php/call/hw39yxkp&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;iconUrl&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/core/img/actions/group.svg&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;sinceId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;subtitle&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;@roberto What&#39;s up?&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jane&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;link&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/index.php/call/z87agy2o&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;iconUrl&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://my.nextcloud.org/index.php/avatar/toto/64&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;sinceId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="users.html" class="btn btn-neutral float-left" title="User management" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reference.html" class="btn btn-neutral float-right" title="Reference providers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025 Nextcloud GmbH.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.nextcloud.com/server/25/developer_manual">25</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/26/developer_manual">26</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/27/developer_manual">27</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/stable/developer_manual">stable</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/latest/developer_manual">latest</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="///projects//?fromdocs=">Project Home</a>
          </dd>
          <dd>
            <a href="///builds//?fromdocs=">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>