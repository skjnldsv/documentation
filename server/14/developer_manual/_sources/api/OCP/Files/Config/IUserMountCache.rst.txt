.. rst-class:: phpdoctorst

.. role:: php(code)
	:language: php


IUserMountCache
===============


.. php:namespace:: OCP\Files\Config

.. php:interface:: IUserMountCache


	.. rst-class:: phpdoc-description
	
		| Cache mounts points per user in the cache so we can easily look them up
		
	
	:Implemented by:
		:php:class:`OC\\Files\\Config\\UserMountCache` 
	
	
	:Source:
		`lib/public/Files/Config/IUserMountCache.php#35 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Config/IUserMountCache.php#L35>`_
	

Methods
-------

.. rst-class:: public

	.. php:method:: public registerMounts( $user, $mounts)
	
		.. rst-class:: phpdoc-description
		
			| Register mounts for a user to the cache
			
		
		:Source:
			`lib/public/Files/Config/IUserMountCache.php#43 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Config/IUserMountCache.php#L43>`_
		
		
		:Parameters:
			* **$user** (:any:`OCP\\IUser <OCP\\IUser>`)  
			* **$mounts** (:any:`OCP\\Files\\Mount\\IMountPoint\[\] <OCP\\Files\\Mount\\IMountPoint>`)  

		
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getMountsForUser( $user)
	
		.. rst-class:: phpdoc-description
		
			| Get all cached mounts for a user
			
		
		:Source:
			`lib/public/Files/Config/IUserMountCache.php#52 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Config/IUserMountCache.php#L52>`_
		
		
		:Parameters:
			* **$user** (:any:`OCP\\IUser <OCP\\IUser>`)  

		
		:Returns: :any:`\\OCP\\Files\\Config\\ICachedMountInfo\[\] <OCP\\Files\\Config\\ICachedMountInfo>` 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getMountsForStorageId( $numericStorageId, $user=null)
	
		.. rst-class:: phpdoc-description
		
			| Get all cached mounts by storage
			
		
		:Source:
			`lib/public/Files/Config/IUserMountCache.php#62 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Config/IUserMountCache.php#L62>`_
		
		
		:Parameters:
			* **$numericStorageId** (int)  
			* **$user** (string | null)  limit the results to a single user @since 12.0.0

		
		:Returns: :any:`\\OCP\\Files\\Config\\ICachedMountInfo\[\] <OCP\\Files\\Config\\ICachedMountInfo>` 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getMountsForRootId( $rootFileId)
	
		.. rst-class:: phpdoc-description
		
			| Get all cached mounts by root
			
		
		:Source:
			`lib/public/Files/Config/IUserMountCache.php#71 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Config/IUserMountCache.php#L71>`_
		
		
		:Parameters:
			* **$rootFileId** (int)  

		
		:Returns: :any:`\\OCP\\Files\\Config\\ICachedMountInfo\[\] <OCP\\Files\\Config\\ICachedMountInfo>` 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getMountsForFileId( $fileId, $user=null)
	
		.. rst-class:: phpdoc-description
		
			| Get all cached mounts that contain a file
			
		
		:Source:
			`lib/public/Files/Config/IUserMountCache.php#81 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Config/IUserMountCache.php#L81>`_
		
		
		:Parameters:
			* **$fileId** (int)  
			* **$user** (string | null)  optionally restrict the results to a single user @since 12.0.0

		
		:Returns: :any:`\\OCP\\Files\\Config\\ICachedMountFileInfo\[\] <OCP\\Files\\Config\\ICachedMountFileInfo>` 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public removeUserMounts( $user)
	
		.. rst-class:: phpdoc-description
		
			| Remove all cached mounts for a user
			
		
		:Source:
			`lib/public/Files/Config/IUserMountCache.php#89 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Config/IUserMountCache.php#L89>`_
		
		
		:Parameters:
			* **$user** (:any:`OCP\\IUser <OCP\\IUser>`)  

		
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public removeUserStorageMount( $storageId, $userId)
	
		.. rst-class:: phpdoc-description
		
			| Remove all mounts for a user and storage
			
		
		:Source:
			`lib/public/Files/Config/IUserMountCache.php#99 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Config/IUserMountCache.php#L99>`_
		
		
		:Parameters:
			* **$storageId**  
			* **$userId** (string)  

		
		:Returns: mixed 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public remoteStorageMounts( $storageId)
	
		.. rst-class:: phpdoc-description
		
			| Remove all cached mounts for a storage
			
		
		:Source:
			`lib/public/Files/Config/IUserMountCache.php#108 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Config/IUserMountCache.php#L108>`_
		
		
		:Parameters:
			* **$storageId**  

		
		:Returns: mixed 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getUsedSpaceForUsers( $users)
	
		.. rst-class:: phpdoc-description
		
			| Get the used space for users
			
			| Note that this only includes the space in their home directory,
			| not any incoming shares or external storages\.
			
		
		:Source:
			`lib/public/Files/Config/IUserMountCache.php#120 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Config/IUserMountCache.php#L120>`_
		
		
		:Parameters:
			* **$users** (:any:`OCP\\IUser\[\] <OCP\\IUser>`)  

		
		:Returns: int[] \[$userId =\> $userSpace\]
		:Since: 13.0.0 
	
	

.. rst-class:: public

	.. php:method:: public clear()
	
		.. rst-class:: phpdoc-description
		
			| Clear all entries from the in\-memory cache
			
		
		:Source:
			`lib/public/Files/Config/IUserMountCache.php#127 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Config/IUserMountCache.php#L127>`_
		
		
		:Since: 20.0.0 
	
	

