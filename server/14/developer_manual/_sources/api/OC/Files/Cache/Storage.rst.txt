.. rst-class:: phpdoctorst

.. role:: php(code)
	:language: php


Storage
=======


.. php:namespace:: OC\Files\Cache

.. php:class:: Storage


	.. rst-class:: phpdoc-description
	
		| Handle the mapping between the string and numeric storage ids
		
		| Each storage has 2 different ids
		| 	a string id which is generated by the storage backend and reflects the configuration of the storage \(e\.g\. \'smb://user@host/share\'\)
		| 	and a numeric storage id which is referenced in the file cache
		| 
		| A mapping between the two storage ids is stored in the database and accessible trough this class
		
	
	:Source:
		`lib/private/Files/Cache/Storage.php#46 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L46>`_
	

Properties
----------

Methods
-------

.. rst-class:: public static

	.. php:method:: public static getGlobalCache()
	
		:Source:
			`lib/private/Files/Cache/Storage.php#55 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L55>`_
		
		
		:Returns: :any:`\\OC\\Files\\Cache\\StorageGlobal <OC\\Files\\Cache\\StorageGlobal>` 
	
	

.. rst-class:: public

	.. php:method:: public __construct( $storage, $isAvailable=true)
	
		:Source:
			`lib/private/Files/Cache/Storage.php#67 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L67>`_
		
		
		:Parameters:
			* **$storage** (:any:`OC\\Files\\Storage\\Storage <OC\\Files\\Storage\\Storage>` | string)  
			* **$isAvailable** (bool)  

		
		:Throws: :any:`\\RuntimeException <RuntimeException>` 
	
	

.. rst-class:: public static

	.. php:method:: public static getStorageById( $storageId)
	
		:Source:
			`lib/private/Files/Cache/Storage.php#96 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L96>`_
		
		
		:Parameters:
			* **$storageId** (string)  

		
		:Returns: array 
	
	

.. rst-class:: public static

	.. php:method:: public static adjustStorageId( $storageId)
	
		.. rst-class:: phpdoc-description
		
			| Adjusts the storage id to use md5 if too long
			
		
		:Source:
			`lib/private/Files/Cache/Storage.php#106 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L106>`_
		
		
		:Parameters:
			* **$storageId** (string)  storage id

		
		:Returns: string unchanged $storageId if its length is less than 64 characters,
			else returns the md5 of $storageId
		
	
	

.. rst-class:: public

	.. php:method:: public getNumericId()
	
		.. rst-class:: phpdoc-description
		
			| Get the numeric id for the storage
			
		
		:Source:
			`lib/private/Files/Cache/Storage.php#118 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L118>`_
		
		
		:Returns: int 
	
	

.. rst-class:: public static

	.. php:method:: public static getStorageId( $numericId)
	
		.. rst-class:: phpdoc-description
		
			| Get the string id for the storage
			
		
		:Source:
			`lib/private/Files/Cache/Storage.php#128 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L128>`_
		
		
		:Parameters:
			* **$numericId** (int)  

		
		:Returns: string | null either the storage id string or null if the numeric id is not known
	
	

.. rst-class:: public static

	.. php:method:: public static getNumericStorageId( $storageId)
	
		.. rst-class:: phpdoc-description
		
			| Get the numeric of the storage with the provided string id
			
		
		:Source:
			`lib/private/Files/Cache/Storage.php#149 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L149>`_
		
		
		:Parameters:
			* **$storageId**  

		
		:Returns: int | null either the numeric storage id or null if the storage id is not knwon
	
	

.. rst-class:: public

	.. php:method:: public getAvailability()
	
		:Source:
			`lib/private/Files/Cache/Storage.php#162 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L162>`_
		
		
		:Returns: array | null \[ available, last\_checked \]
	
	

.. rst-class:: public

	.. php:method:: public setAvailability( $isAvailable, $delay=0)
	
		:Source:
			`lib/private/Files/Cache/Storage.php#177 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L177>`_
		
		
		:Parameters:
			* **$isAvailable** (bool)  
			* **$delay** (int)  amount of seconds to delay reconsidering that storage further

		
	
	

.. rst-class:: public static

	.. php:method:: public static exists( $storageId)
	
		.. rst-class:: phpdoc-description
		
			| Check if a string storage id is known
			
		
		:Source:
			`lib/private/Files/Cache/Storage.php#197 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L197>`_
		
		
		:Parameters:
			* **$storageId** (string)  

		
		:Returns: bool 
	
	

.. rst-class:: public static

	.. php:method:: public static remove( $storageId)
	
		.. rst-class:: phpdoc-description
		
			| remove the entry for the storage
			
		
		:Source:
			`lib/private/Files/Cache/Storage.php#206 <https://github.com/nextcloud/server/blob/stable13/lib/private/Files/Cache/Storage.php#L206>`_
		
		
		:Parameters:
			* **$storageId** (string)  

		
	
	

