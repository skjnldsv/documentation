<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Upgrade to Nextcloud 22 &mdash; Nextcloud latest Developer Manual latest documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="../../_static/dark_mode_css/dark.css?v=70edf1c7" />

  
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=c6e86fd7"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script src="../../_static/dark_mode_js/default_light.js?v=c2e647ce"></script>
        <script src="../../_static/dark_mode_js/theme_switcher.js?v=358d3910"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Upgrade to Nextcloud 21" href="upgrade_to_21.html" />
    <link rel="prev" title="Upgrade to Nextcloud 23" href="upgrade_to_23.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo-white.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../prologue/index.html">Prologue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basics/index.html">Basic concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_development/index.html">App development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Server development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../digging_deeper/index.html">Digging deeper</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">App publishing and maintenance</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../maintainer.html">Maintainers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release_process.html">Release process</a></li>
<li class="toctree-l2"><a class="reference external" href="https://nextcloudappstore.readthedocs.io/en/latest/developer.html">Publishing App on the App Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../publishing.html">The Nextcloud app store rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_signing.html">Code signing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release_automation.html">Release Automation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">App upgrade guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_30.html">Upgrade to Nextcloud 30</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_29.html">Upgrade to Nextcloud 29</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_28.html">Upgrade to Nextcloud 28</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_27.html">Upgrade to Nextcloud 27</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_26.html">Upgrade to Nextcloud 26</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_25.html">Upgrade to Nextcloud 25</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_24.html">Upgrade to Nextcloud 24</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_23.html">Upgrade to Nextcloud 23</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Upgrade to Nextcloud 22</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#general">General</a></li>
<li class="toctree-l4"><a class="reference internal" href="#front-end-changes">Front-end changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#back-end-changes">Back-end changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_21.html">Upgrade to Nextcloud 21</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_20.html">Upgrade to Nextcloud 20</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_19.html">Upgrade to Nextcloud 19</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_18.html">Upgrade to Nextcloud 18</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_17.html">Upgrade to Nextcloud 17</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_16.html">Upgrade to Nextcloud 16</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_15.html">Upgrade to Nextcloud 15</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade_to_14.html">Upgrade to Nextcloud 14</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../design/index.html">Interface &amp; interaction design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../html_css_design/index.html">HTML/CSS guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client_apis/index.html">Clients and Client APIs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Nextcloud latest Developer Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">App publishing and maintenance</a></li>
          <li class="breadcrumb-item"><a href="index.html">App upgrade guide</a></li>
      <li class="breadcrumb-item active">Upgrade to Nextcloud 22</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/nextcloud/documentation/edit/master/developer_manual/app_publishing_maintenance/app_upgrade_guide/upgrade_to_22.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="upgrade-to-nextcloud-22">
<h1>Upgrade to Nextcloud 22<a class="headerlink" href="#upgrade-to-nextcloud-22" title="Link to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Critical changes were collected <a class="reference external" href="https://github.com/nextcloud/server/issues/26407">on GitHub</a>. See the original ticket for links to the pull requests and tickets.</p>
</div>
<section id="general">
<h2>General<a class="headerlink" href="#general" title="Link to this heading"></a></h2>
<section id="migration-commands">
<h3>Migration commands<a class="headerlink" href="#migration-commands" title="Link to this heading"></a></h3>
<p>The occ commands in the <code class="docutils literal notranslate"><span class="pre">migration:*</span></code> namespace are now only available in <a class="reference internal" href="../../digging_deeper/debugging.html#debug-mode"><span class="std std-ref">debug mode</span></a>.</p>
<p>See <a class="reference external" href="https://github.com/nextcloud/server/pull/27113">the pull request on GitHub</a> for more information. If you thought you needed them, feel free to ping the author or a reviewer of the PR to solve the problem correctly. Running migrations directly mostly breaks the database status and is therefore only meant for debugging faulty migrations.</p>
</section>
<section id="log-format">
<h3>Log format<a class="headerlink" href="#log-format" title="Link to this heading"></a></h3>
<p>The JSON log format no longer contains full exception in the message field, but a separate exception entry is added and the existing message will only contain the exception message text. This might need adjustments by administrators when logs are extracted to external sources.</p>
</section>
</section>
<section id="front-end-changes">
<h2>Front-end changes<a class="headerlink" href="#front-end-changes" title="Link to this heading"></a></h2>
<section id="scss-variable-and-compilation-deprecation">
<h3>Scss variable and compilation deprecation<a class="headerlink" href="#scss-variable-and-compilation-deprecation" title="Link to this heading"></a></h3>
<p>Nextcloud is slowly phasing out scss variables and the compilation of app style sheets. It’s recommended that apps use their own compilation (e.g. through Webpack) to transform scss and similar to plain css. The ability of Nextcloud compiling scss for apps will be removed in the future. Subscribe to <a class="reference external" href="https://github.com/nextcloud/server/issues/9940">GitHub ticket 9940</a> to get updates on how to best approach this. Right now some scss variables can be replaced with css variables. Other mechanisms like the icon generation still depend on the scss compilation by Nextcloud.</p>
</section>
<section id="node-js-upgrade">
<h3>Node.js upgrade<a class="headerlink" href="#node-js-upgrade" title="Link to this heading"></a></h3>
<p>Most Nextcloud apps and Nextcloud itself is now built with Node v14 LTS instead of v12. We recommend updating the configuration of your app accordingly.</p>
</section>
<section id="ie11-removal">
<h3>IE11 removal<a class="headerlink" href="#ie11-removal" title="Link to this heading"></a></h3>
<p>Internet Explorer 11 was phased out over the past few releases and starting with Nextcloud 22 the front-end code isn’t transpiled for IE11 any longer. You may also drop IE11 from your app as core components will possibly fail with this browser anyway.</p>
</section>
<section id="deprecated-global-variables">
<h3>Deprecated global variables<a class="headerlink" href="#deprecated-global-variables" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DOMPurify</span></code>: ship your own.</p></li>
</ul>
</section>
</section>
<section id="back-end-changes">
<h2>Back-end changes<a class="headerlink" href="#back-end-changes" title="Link to this heading"></a></h2>
<section id="removed-support-for-database-xml">
<h3>Removed support for database.xml<a class="headerlink" href="#removed-support-for-database-xml" title="Link to this heading"></a></h3>
<p>The support for an app’s <code class="docutils literal notranslate"><span class="pre">appinfo/database.xml</span></code> has been removed.</p>
</section>
<section id="psr-events">
<h3>PSR events<a class="headerlink" href="#psr-events" title="Link to this heading"></a></h3>
<p>In order to bring Nextcloud APIs closer to <a class="reference internal" href="../../digging_deeper/psr.html#psr"><span class="std std-ref">PSR</span></a> the base event class no longer extends the old Symfony event class but only <code class="docutils literal notranslate"><span class="pre">\Psr\EventDispatcher\StoppableEventInterface</span></code>. From an app’s perspective this change is transparent.</p>
</section>
<section id="psr-container">
<h3>PSR container<a class="headerlink" href="#psr-container" title="Link to this heading"></a></h3>
<p>The <a class="reference internal" href="../../digging_deeper/psr.html#psr11"><span class="std std-ref">PSR 11 container interface</span></a> was updated from version 1.0 to 1.1.</p>
</section>
<section id="ldap-factory-availability">
<h3>LDAP factory availability<a class="headerlink" href="#ldap-factory-availability" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">\OCP\LDAP\ILDAPProviderFactory</span></code> received a new method <code class="docutils literal notranslate"><span class="pre">isAvailable</span></code> so apps can check if LDAP is configured and used before any attributes are fetched or similar.</p>
</section>
<section id="boolean-database-columns">
<h3>Boolean database columns<a class="headerlink" href="#boolean-database-columns" title="Link to this heading"></a></h3>
<p>Since Oracle can not store booleans in a non-nullable boolean column Nextcloud doesn’t support non-null boolean columns anymore. Apps have to migrate their schema to nullable boolean columns.</p>
</section>
<section id="http-401-for-invalid-username-password">
<h3>HTTP 401 for invalid username/password<a class="headerlink" href="#http-401-for-invalid-username-password" title="Link to this heading"></a></h3>
<p>When invalid username/password is sent to a Nextcloud API, Nextcloud will now respond with a HTTP 401 status instead of 403.</p>
</section>
<section id="removed-apis">
<h3>Removed APIs<a class="headerlink" href="#removed-apis" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\OC\Memcache\Factory::create</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\OCP\User</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\OCP\Util::isIe</span></code></p></li>
</ul>
</section>
<section id="deprecated-apis">
<h3>Deprecated APIs<a class="headerlink" href="#deprecated-apis" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\OCP\Log\ILogFactory::getCustomLogger</span></code>: use <code class="docutils literal notranslate"><span class="pre">\OCP\Log\ILogFactory::getCustomPsrLogger</span></code> to get a customized <a class="reference internal" href="../../digging_deeper/psr.html#psr3"><span class="std std-ref">PSR3</span></a> logger</p></li>
<li><p>Event <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::ADD_MISSING_INDEXES</span></code> and the corresponding constant <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::ADD_MISSING_INDEXES_EVENT</span></code>: internal event</p></li>
<li><p>Event <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::CHECK_MISSING_INDEXES</span></code> and the corresponding constant <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::CHECK_MISSING_INDEXES_EVENT</span></code>: internal event</p></li>
<li><p>Event <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::ADD_MISSING_PRIMARY_KEYS</span></code> and the corresponding constant <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::ADD_MISSING_PRIMARY_KEYS_EVENT</span></code>: internal event</p></li>
<li><p>Event <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::CHECK_MISSING_PRIMARY_KEYS</span></code> and the corresponding constant <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::CHECK_MISSING_PRIMARY_KEYS_EVENT</span></code>: internal event</p></li>
<li><p>Event <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::ADD_MISSING_COLUMNS_EVENT</span></code> and the corresponding constant <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::ADD_MISSING_COLUMNS</span></code>: internal event</p></li>
<li><p>Event <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::CHECK_MISSING_COLUMNS</span></code> and the corresponding constant <code class="docutils literal notranslate"><span class="pre">\OCP\IDBConnection::CHECK_MISSING_COLUMNS</span></code>: internal event</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="upgrade_to_23.html" class="btn btn-neutral float-left" title="Upgrade to Nextcloud 23" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="upgrade_to_21.html" class="btn btn-neutral float-right" title="Upgrade to Nextcloud 21" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025 Nextcloud GmbH.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.nextcloud.com/server/28/developer_manual">28</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/29/developer_manual">29</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/stable/developer_manual">stable</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/latest/developer_manual">latest</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="///projects//?fromdocs=">Project Home</a>
          </dd>
          <dd>
            <a href="///builds//?fromdocs=">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>