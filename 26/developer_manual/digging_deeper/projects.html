<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Projects &mdash; Nextcloud latest Developer Manual latest documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Groupware integration" href="groupware/index.html" />
    <link rel="prev" title="Reference providers" href="reference.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo-white.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../prologue/index.html">Prologue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/index.html">Basic concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app_development/index.html">App development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Core development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Digging deeper</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api.html">API reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="classloader.html">Classloader</a></li>
<li class="toctree-l2"><a class="reference internal" href="continuous_integration.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow.html">Nextcloud Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="http_client.html">HTTP Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="javascript-apis.html">JavaScript APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="npm.html">NPM</a></li>
<li class="toctree-l2"><a class="reference internal" href="notifications.html">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.html">Performance considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="psr.html">PSR</a></li>
<li class="toctree-l2"><a class="reference internal" href="publicpage.html">Public Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="repair.html">Repair steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest_apis.html">REST APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="search.html">Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="talk.html">Talk Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="translation.html">Machine Translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="two-factor-provider.html">Two-factor providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="users.html">User management</a></li>
<li class="toctree-l2"><a class="reference internal" href="dashboard.html">Dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html">Reference providers</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Projects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#register-a-resource-provider">Register a resource provider</a></li>
<li class="toctree-l3"><a class="reference internal" href="#provide-a-user-interface">Provide a user interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="groupware/index.html">Groupware integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_host_metadata.html">Web Host Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="status.html">User Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile.html">Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_migration.html">User migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="profiler.html">Profiler</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../app_publishing_maintenance/index.html">App publishing and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Nextcloud design guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../html_css_design/index.html">HTML/CSS guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client_apis/index.html">Clients and Client APIs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nextcloud latest Developer Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Digging deeper</a></li>
      <li class="breadcrumb-item active">Projects</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/nextcloud/documentation/edit/master/developer_manual/digging_deeper/projects.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="projects">
<h1>Projects<a class="headerlink" href="#projects" title="Permalink to this headline"></a></h1>
<p>Projects are a way to link items from different apps via a common interface.</p>
<p>App developers can integrate into projects and provide their own entity types to link with.</p>
<section id="register-a-resource-provider">
<h2>Register a resource provider<a class="headerlink" href="#register-a-resource-provider" title="Permalink to this headline"></a></h2>
<p>Things like files, deck cards and talk rooms are called Resources in projects.
In order to add your own resource type, we need to create a class implementing the
<code class="docutils literal notranslate"><span class="pre">OCP\Collaboration\Resources\IProvider</span></code> interface.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">OCA\MyApp\Collaboration\Resources</span><span class="p">;</span>


<span class="k">use</span> <span class="nx">OCP\Collaboration\Resources\IProvider</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\Collaboration\Resources\IResource</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\IURLGenerator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\IUser</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyResourceProvider</span> <span class="k">implements</span> <span class="nx">IProvider</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">const</span> <span class="no">RESOURCE_TYPE</span> <span class="o">=</span> <span class="s1">&#39;my-app-item&#39;</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @var IURLGenerator</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$url</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">IURLGenerator</span> <span class="nv">$url</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span> <span class="o">=</span> <span class="nv">$url</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getType</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">self</span><span class="o">::</span><span class="na">RESOURCE_TYPE</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getResourceRichObject</span><span class="p">(</span><span class="nx">IResource</span> <span class="nv">$resource</span><span class="p">)</span><span class="o">:</span> <span class="k">array</span> <span class="p">{</span>
        <span class="nv">$item</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getItem</span><span class="p">(</span><span class="nv">$resource</span><span class="p">);</span>
        <span class="nv">$icon</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="o">-&gt;</span><span class="na">linkToRouteAbsolute</span><span class="p">(</span><span class="s1">&#39;myapp.images.get_icon&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()]);</span>
        <span class="nv">$resourceUrl</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="o">-&gt;</span><span class="na">linkToRouteAbsolute</span><span class="p">(</span><span class="s1">&#39;bookmarks.page.index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;item&#39;</span> <span class="o">=&gt;</span> <span class="nv">$bookmark</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()]);</span>

        <span class="k">return</span> <span class="p">[</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="nx">self</span><span class="o">::</span><span class="na">RESOURCE_TYPE</span><span class="p">,</span>
            <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$resource</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span>
            <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">getTitle</span><span class="p">(),</span>
            <span class="s1">&#39;link&#39;</span> <span class="o">=&gt;</span> <span class="nv">$resourceUrl</span><span class="p">,</span>
            <span class="s1">&#39;iconUrl&#39;</span> <span class="o">=&gt;</span> <span class="nv">$favicon</span><span class="p">,</span>
        <span class="p">];</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">canAccessResource</span><span class="p">(</span><span class="nx">IResource</span> <span class="nv">$resource</span><span class="p">,</span> <span class="o">?</span><span class="nx">IUser</span> <span class="nv">$user</span><span class="p">)</span><span class="o">:</span> <span class="nx">bool</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$resource</span><span class="o">-&gt;</span><span class="na">getType</span><span class="p">()</span> <span class="o">!==</span> <span class="nx">self</span><span class="o">::</span><span class="na">RESOURCE_TYPE</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="nv">$user</span> <span class="nx">instanceof</span> <span class="nx">IUser</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$bookmark</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getItem</span><span class="p">(</span><span class="nv">$resource</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$bookmark</span> <span class="o">===</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$bookmark</span><span class="o">-&gt;</span><span class="na">getUserId</span><span class="p">()</span> <span class="o">===</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">getUID</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">function</span> <span class="nf">getItem</span><span class="p">(</span><span class="nx">IResource</span> <span class="nv">$resource</span><span class="p">)</span> <span class="o">:</span> <span class="o">?</span><span class="nx">Item</span> <span class="p">{</span>
        <span class="c1">// implement me</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">MyResourceProvider</span></code> class needs to be registered during the <a class="reference internal" href="../app_development/bootstrap.html#bootstrapping"><span class="std std-ref">app bootstrap</span></a>.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>

<span class="k">namespace</span> <span class="nx">OCA\MyApp\AppInfo</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">OCP\AppFramework\App</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\AppFramework\Bootstrap\IBootContext</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\AppFramework\Bootstrap\IBootstrap</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCP\AppFramework\Bootstrap\IRegistrationContext</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">OCA\MyApp\Dashboard\MyAppWidget</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Application</span> <span class="k">extends</span> <span class="nx">App</span> <span class="k">implements</span> <span class="nx">IBootstrap</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">const</span> <span class="no">APP_ID</span> <span class="o">=</span> <span class="s1">&#39;myapp&#39;</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="k">array</span> <span class="nv">$urlParams</span> <span class="o">=</span> <span class="p">[])</span> <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="na">APP_ID</span><span class="p">,</span> <span class="nv">$urlParams</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">register</span><span class="p">(</span><span class="nx">IRegistrationContext</span> <span class="nv">$context</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">boot</span><span class="p">(</span><span class="nx">IBootContext</span> <span class="nv">$context</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{</span>
        <span class="nv">$context</span><span class="o">-&gt;</span><span class="na">injectFn</span><span class="p">(</span><span class="nx">Closure</span><span class="o">::</span><span class="na">fromCallable</span><span class="p">([</span><span class="nv">$this</span><span class="p">,</span> <span class="s1">&#39;registerCollaborationResources&#39;</span><span class="p">]));</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">registerCollaborationResources</span><span class="p">(</span><span class="nx">IProviderManager</span> <span class="nv">$resourceManager</span><span class="p">,</span> <span class="nx">IEventDispatcher</span> <span class="nv">$eventDispatcher</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span> <span class="p">{</span>
        <span class="nv">$resourceManager</span><span class="o">-&gt;</span><span class="na">registerResourceProvider</span><span class="p">(</span><span class="nx">ResourceProvider</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

        <span class="nv">$eventDispatcher</span><span class="o">-&gt;</span><span class="na">addListener</span><span class="p">(</span><span class="nx">\OCP\Collaboration\Resources\LoadAdditionalScriptsEvent</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="k">static</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">Util</span><span class="o">::</span><span class="na">addScript</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="na">APP_ID</span><span class="p">,</span> <span class="s1">&#39;collections&#39;</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As you can see we also already register a front-end script, which we are going to create next.</p>
</section>
<section id="provide-a-user-interface">
<h2>Provide a user interface<a class="headerlink" href="#provide-a-user-interface" title="Permalink to this headline"></a></h2>
<p>The user interface can be registered through the public <code class="docutils literal notranslate"><span class="pre">OCP.Collaboration.registerType</span></code>
JavaScript method. The first parameter represents the resource type that has already
been specified in the <code class="docutils literal notranslate"><span class="pre">IResourceProvider</span></code> implementation. The second parameter is an object with
three properties:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">typeString</span></code> A localized string that will be displayed in the dropdown when choosing which resource type to link to</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">typeIconClass</span></code> A CSS class of the icon that should be used for this entry</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">action</span></code> An async function that will produce a resource picker UI and resolves with the resource id</p></li>
</ul>
</div></blockquote>
<p>The following example shows how a Vue.js component could be used to render the
widget user interface, however this approach works for any other framework as well
as plain JavaScript:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nx">Vue</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vue&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">ItemPickerDialog</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./components/ItemPickerDialog&#39;</span>

<span class="nx">OCP</span><span class="p">.</span><span class="nx">Collaboration</span><span class="p">.</span><span class="nx">registerType</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">action</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="kd">const</span><span class="w"> </span><span class="nx">container</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span>
<span class="w">                        </span><span class="nx">container</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;myapp-item-select&#39;</span>
<span class="w">                        </span><span class="kd">const</span><span class="w"> </span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;body-user&#39;</span><span class="p">)</span>
<span class="w">                        </span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">container</span><span class="p">)</span>
<span class="w">                        </span><span class="kd">const</span><span class="w"> </span><span class="nx">ComponentVM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Vue</span><span class="p">({</span>
<span class="w">                                </span><span class="nx">render</span><span class="o">:</span><span class="w"> </span><span class="nx">h</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">h</span><span class="p">(</span><span class="nx">ItemPickerDialog</span><span class="p">),</span>
<span class="w">                        </span><span class="p">})</span>
<span class="w">                        </span><span class="nx">ComponentVM</span><span class="p">.</span><span class="nx">$mount</span><span class="p">(</span><span class="nx">container</span><span class="p">)</span>
<span class="w">                        </span><span class="nx">ComponentVM</span><span class="p">.</span><span class="nx">$root</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="nx">ComponentVM</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span>
<span class="w">                                </span><span class="nx">ComponentVM</span><span class="p">.</span><span class="nx">$destroy</span><span class="p">()</span>
<span class="w">                                </span><span class="nx">reject</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;User cancelled resource selection&#39;</span><span class="p">))</span>
<span class="w">                        </span><span class="p">})</span>
<span class="w">                        </span><span class="nx">ComponentVM</span><span class="p">.</span><span class="nx">$root</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="s1">&#39;select&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="nx">resolve</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span>
<span class="w">                                </span><span class="nx">ComponentVM</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span>
<span class="w">                                </span><span class="nx">ComponentVM</span><span class="p">.</span><span class="nx">$destroy</span><span class="p">()</span>
<span class="w">                        </span><span class="p">})</span>
<span class="w">                </span><span class="p">})</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">typeString</span><span class="o">:</span><span class="w"> </span><span class="nx">t</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Link to an item&#39;</span><span class="p">),</span>
<span class="w">        </span><span class="nx">typeIconClass</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;icon-file&#39;</span><span class="p">,</span>
<span class="p">})</span>
</pre></div>
</div>
<p>This will allow other apps to link to your items. We also want to link to other apps’ items.
Since all apps with projects support are listening on the above LoadAdditionalScriptsEvent,
we can simply dispatch it when we render our main page template.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">class</span> <span class="nc">MyController</span> <span class="k">extends</span> <span class="nx">Controller</span> <span class="p">{</span>
        <span class="k">private</span> <span class="nx">IEventDispatcher</span> <span class="nv">$eventDispatcher</span><span class="p">;</span>

        <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$appName</span><span class="p">,</span> <span class="nx">IRequest</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">IEventDispatcher</span> <span class="nv">$eventDispatcher</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nv">$appName</span><span class="p">,</span> <span class="nv">$request</span><span class="p">);</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">eventDispatcher</span> <span class="o">=</span> <span class="nv">$eventDispatcher</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">eventDispatcher</span><span class="o">-&gt;</span><span class="na">dispatchTyped</span><span class="p">(</span><span class="k">new</span> <span class="nx">\OCP\Collaboration\Resources\LoadAdditionalScriptsEvent</span><span class="p">());</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nx">TemplateResponse</span><span class="p">(</span><span class="s1">&#39;my_app&#39;</span><span class="p">,</span> <span class="s1">&#39;main&#39;</span><span class="p">);</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In our Vue app, we can then render the pre-built projects picker available in the npm package <code class="docutils literal notranslate"><span class="pre">nextcloud-vue-collections</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">template</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">CollectionList</span> <span class="n">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&quot;itemId&quot;</span>
            <span class="p">:</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;itemId&quot;</span>
            <span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;itemTitle&quot;</span>
            <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;myapp&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">template</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">CollectionList</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;nextcloud-vue-collections&#39;</span>
<span class="n">export</span> <span class="n">default</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;CollaborationView&#39;</span><span class="p">,</span>
    <span class="n">components</span><span class="p">:</span> <span class="p">{</span>
        <span class="n">CollectionList</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">props</span><span class="p">:</span> <span class="p">{</span>
        <span class="nb">id</span><span class="p">:</span> <span class="p">{</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
            <span class="n">default</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">name</span><span class="p">:</span> <span class="p">{</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
            <span class="n">default</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="reference.html" class="btn btn-neutral float-left" title="Reference providers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="groupware/index.html" class="btn btn-neutral float-right" title="Groupware integration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025 Nextcloud GmbH.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.nextcloud.com/server/24/developer_manual">24</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/25/developer_manual">25</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/stable/developer_manual">stable</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/latest/developer_manual">latest</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="///projects//?fromdocs=">Project Home</a>
          </dd>
          <dd>
            <a href="///builds//?fromdocs=">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>