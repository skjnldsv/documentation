.. rst-class:: phpdoctorst

.. role:: php(code)
	:language: php


IStorage
========


.. php:namespace:: OCP\Files\Storage

.. php:interface:: IStorage


	.. rst-class:: phpdoc-description
	
		| Provide a common interface to all different storage options
		
		| All paths passed to the storage are relative to the storage and should NOT have a leading slash\.
		
	
	:Source:
		`lib/public/Files/Storage/IStorage.php#52 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L52>`_
	

Methods
-------

.. rst-class:: public

	.. php:method:: public __construct( $parameters)
	
		.. rst-class:: phpdoc-description
		
			| $parameters is a free form array with the configuration options needed to construct the storage
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#59 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L59>`_
		
		
		:Parameters:
			* **$parameters** (array)  

		
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getId()
	
		.. rst-class:: phpdoc-description
		
			| Get the identifier for the storage,
			| the returned id should be the same for every storage object that is created with the same parameters
			| and two storage objects with the same id should refer to two storages that display the same files\.
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#69 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L69>`_
		
		
		:Returns: string 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public mkdir( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.mkdir\.php
			| implementations need to implement a recursive mkdir
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#79 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L79>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public rmdir( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.rmdir\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#88 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L88>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public opendir( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.opendir\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#97 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L97>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: resource | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public is_dir( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.is\-dir\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#106 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L106>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public is_file( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.is\-file\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#115 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L115>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public stat( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.stat\.php
			| only the following keys are required in the result: size and mtime
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#125 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L125>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: array | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public filetype( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.filetype\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#134 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L134>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: string | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public filesize( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.filesize\.php
			| The result for filesize when called on a folder is required to be 0
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#144 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L144>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: int | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public isCreatable( $path)
	
		.. rst-class:: phpdoc-description
		
			| check if a file can be created in $path
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#153 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L153>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public isReadable( $path)
	
		.. rst-class:: phpdoc-description
		
			| check if a file can be read
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#162 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L162>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public isUpdatable( $path)
	
		.. rst-class:: phpdoc-description
		
			| check if a file can be written to
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#171 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L171>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public isDeletable( $path)
	
		.. rst-class:: phpdoc-description
		
			| check if a file can be deleted
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#180 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L180>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public isSharable( $path)
	
		.. rst-class:: phpdoc-description
		
			| check if a file can be shared
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#189 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L189>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getPermissions( $path)
	
		.. rst-class:: phpdoc-description
		
			| get the full permissions of a path\.
			
			| Should return a combination of the PERMISSION\_ constants defined in lib/public/constants\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#199 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L199>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: int 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public file_exists( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.file\_exists\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#208 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L208>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public filemtime( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.filemtime\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#217 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L217>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: int | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public file_get_contents( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.file\_get\_contents\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#226 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L226>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: string | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public file_put_contents( $path, $data)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.file\_put\_contents\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#236 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L236>`_
		
		
		:Parameters:
			* **$path** (string)  
			* **$data** (mixed)  

		
		:Returns: int | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public unlink( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.unlink\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#245 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L245>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public rename( $path1, $path2)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.rename\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#255 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L255>`_
		
		
		:Parameters:
			* **$path1** (string)  
			* **$path2** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public copy( $path1, $path2)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.copy\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#265 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L265>`_
		
		
		:Parameters:
			* **$path1** (string)  
			* **$path2** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public fopen( $path, $mode)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.fopen\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#275 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L275>`_
		
		
		:Parameters:
			* **$path** (string)  
			* **$mode** (string)  

		
		:Returns: resource | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getMimeType( $path)
	
		.. rst-class:: phpdoc-description
		
			| get the mimetype for a file or folder
			| The mimetype for a folder is required to be "httpd/unix\-directory"
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#285 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L285>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: string | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public hash( $type, $path, $raw=false)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.hash\-file\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#296 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L296>`_
		
		
		:Parameters:
			* **$type** (string)  
			* **$path** (string)  
			* **$raw** (bool)  

		
		:Returns: string | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public free_space( $path)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.free\_space\.php
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#305 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L305>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: int | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public touch( $path, $mtime=null)
	
		.. rst-class:: phpdoc-description
		
			| see https://www\.php\.net/manual/en/function\.touch\.php
			| If the backend does not support the operation, false should be returned
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#316 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L316>`_
		
		
		:Parameters:
			* **$path** (string)  
			* **$mtime** (int)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getLocalFile( $path)
	
		.. rst-class:: phpdoc-description
		
			| get the path to a local version of the file\.
			
			| The local version of the file can be temporary and doesn\'t have to be persistent across requests
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#326 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L326>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: string | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public hasUpdated( $path, $time)
	
		.. rst-class:: phpdoc-description
		
			| check if a file or folder has been updated since $time
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#339 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L339>`_
		
		
		:Parameters:
			* **$path** (string)  
			* **$time** (int)  

		
		:Returns: bool 
		:Since: 9.0.0 hasUpdated for folders should return at least true if a file inside the folder is add, removed or renamed\.
			returning true for other changes in the folder is optional
		
	
	

.. rst-class:: public

	.. php:method:: public getETag( $path)
	
		.. rst-class:: phpdoc-description
		
			| get the ETag for a file or folder
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#348 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L348>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: string | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public isLocal()
	
		.. rst-class:: phpdoc-description
		
			| Returns whether the storage is local, which means that files
			| are stored on the local filesystem instead of remotely\.
			
			| Calling getLocalFile\(\) for local storages should always
			| return the local files, whereas for non\-local storages
			| it might return a temporary file\.
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#360 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L360>`_
		
		
		:Returns: bool true if the files are stored locally, false otherwise
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public instanceOfStorage( $class)
	
		.. rst-class:: phpdoc-description
		
			| Check if the storage is an instance of $class or is a wrapper for a storage that is an instance of $class
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#369 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L369>`_
		
		
		:Parameters:
			* **$class** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getDirectDownload( $path)
	
		.. rst-class:: phpdoc-description
		
			| A custom storage implementation can return an url for direct download of a give file\.
			
			| For now the returned array can hold the parameter url \- in future more attributes might follow\.
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#380 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L380>`_
		
		
		:Parameters:
			* **$path** (string)  

		
		:Returns: array | bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public verifyPath( $path, $fileName)
	
		:Source:
			`lib/public/Files/Storage/IStorage.php#389 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L389>`_
		
		
		:Parameters:
			* **$path** (string)  the path of the target folder
			* **$fileName** (string)  the name of the file itself

		
		:Returns: void 
		:Throws: :any:`\\OCP\\Files\\InvalidPathException <OCP\\Files\\InvalidPathException>` 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public copyFromStorage( $sourceStorage, $sourceInternalPath, $targetInternalPath)
	
		:Source:
			`lib/public/Files/Storage/IStorage.php#398 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L398>`_
		
		
		:Parameters:
			* **$sourceStorage** (:any:`OCP\\Files\\Storage\\IStorage <OCP\\Files\\Storage\\IStorage>`)  
			* **$sourceInternalPath** (string)  
			* **$targetInternalPath** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public moveFromStorage( $sourceStorage, $sourceInternalPath, $targetInternalPath)
	
		:Source:
			`lib/public/Files/Storage/IStorage.php#407 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L407>`_
		
		
		:Parameters:
			* **$sourceStorage** (:any:`OCP\\Files\\Storage\\IStorage <OCP\\Files\\Storage\\IStorage>`)  
			* **$sourceInternalPath** (string)  
			* **$targetInternalPath** (string)  

		
		:Returns: bool 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public test()
	
		.. rst-class:: phpdoc-description
		
			| Test a storage for availability
			
		
		:Source:
			`lib/public/Files/Storage/IStorage.php#415 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L415>`_
		
		
		:Since: 9.0.0 
		:Returns: bool 
	
	

.. rst-class:: public

	.. php:method:: public getAvailability()
	
		:Source:
			`lib/public/Files/Storage/IStorage.php#421 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L421>`_
		
		
		:Since: 9.0.0 
		:Returns: array \[ available, last\_checked \]
	
	

.. rst-class:: public

	.. php:method:: public setAvailability( $isAvailable)
	
		:Source:
			`lib/public/Files/Storage/IStorage.php#427 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L427>`_
		
		
		:Parameters:
			* **$isAvailable** (bool)  

		
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getOwner( $path)
	
		:Source:
			`lib/public/Files/Storage/IStorage.php#433 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L433>`_
		
		
		:Parameters:
			* **$path** (string)  path for which to retrieve the owner

		
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getCache()
	
		:Source:
			`lib/public/Files/Storage/IStorage.php#439 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L439>`_
		
		
		:Returns: :any:`\\OCP\\Files\\Cache\\ICache <OCP\\Files\\Cache\\ICache>` 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getPropagator()
	
		:Source:
			`lib/public/Files/Storage/IStorage.php#445 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L445>`_
		
		
		:Returns: :any:`\\OCP\\Files\\Cache\\IPropagator <OCP\\Files\\Cache\\IPropagator>` 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getScanner()
	
		:Source:
			`lib/public/Files/Storage/IStorage.php#451 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L451>`_
		
		
		:Returns: :any:`\\OCP\\Files\\Cache\\IScanner <OCP\\Files\\Cache\\IScanner>` 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getUpdater()
	
		:Source:
			`lib/public/Files/Storage/IStorage.php#457 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L457>`_
		
		
		:Returns: :any:`\\OCP\\Files\\Cache\\IUpdater <OCP\\Files\\Cache\\IUpdater>` 
		:Since: 9.0.0 
	
	

.. rst-class:: public

	.. php:method:: public getWatcher()
	
		:Source:
			`lib/public/Files/Storage/IStorage.php#463 <https://github.com/nextcloud/server/blob/stable13/lib/public/Files/Storage/IStorage.php#L463>`_
		
		
		:Returns: :any:`\\OCP\\Files\\Cache\\IWatcher <OCP\\Files\\Cache\\IWatcher>` 
		:Since: 9.0.0 
	
	

