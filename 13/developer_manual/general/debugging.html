

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Debugging &mdash; Nextcloud 13 Developer Manual 13 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'13',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Backporting" href="backporting.html" />
    <link rel="prev" title="Performance considerations" href="performance.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo-white.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">General contributor guidelines</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="code-of-conduct.html">Community code of conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="devenv.html">Development environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="codingguidelines.html">Coding style &amp; general guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.html">Performance considerations</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#debug-mode">Debug mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#identifying-errors">Identifying errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-variables">Debugging variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-a-php-debugger-xdebug">Using a PHP debugger (XDebug)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-javascript">Debugging JavaScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-html-and-templates">Debugging HTML and templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-alternative-app-directories">Using alternative app directories</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="backporting.html">Backporting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../app/changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/startapp.html">Create an app</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/init.html">Navigation and pre-app configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/info.html">App metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/classloader.html">Classloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/request.html">Request lifecycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/routes.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/container.html">Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/api.html">RESTful API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/templates.html">Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/js.html">JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/css.html">CSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/l10n.html">Translation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/theming.html">Theming support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/schema.html">Database schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/database.html">Database access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/filesystem.html">Filesystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/appdata.html">AppData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/users.html">User management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/two-factor-provider.html">Two-factor providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/hooks.html">Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/backgroundjobs.html">Background jobs (Cron)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/migrations.html">Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/repair.html">Repair steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/publishing.html">App store publishing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/code_signing.html">Code signing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/index.html">App development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../android_library/index.html">Android application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client_apis/index.html">Client APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/translation.html">Translation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/unit-testing.html">Unit-Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/theming.html">Theming Nextcloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/externalapi.html">External API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/ocs-share-api.html">OCS Share API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Core development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bugtracker/index.html">Bugtracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commun/index.html">Help and communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nextcloud 13 Developer Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">General contributor guidelines</a> &raquo;</li>
        
      <li>Debugging</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/nextcloud/documentation/edit/stable13/developer_manual/general/debugging.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="debugging">
<h1>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h1>
<div class="section" id="debug-mode">
<h2>Debug mode<a class="headerlink" href="#debug-mode" title="Permalink to this headline">¶</a></h2>
<p>When debug mode is enabled in Nextcloud, a variety of debugging features are enabled - see debugging documentation. Set <code class="docutils literal"><span class="pre">debug</span></code> to <code class="docutils literal"><span class="pre">true</span></code> in <code class="file docutils literal"><span class="pre">/config/config.php</span></code> to enable it:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="nv">$CONFIG</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span>
    <span class="s1">&#39;debug&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="o">...</span> <span class="nx">configuration</span> <span class="nx">goes</span> <span class="nx">here</span> <span class="o">...</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="identifying-errors">
<h2>Identifying errors<a class="headerlink" href="#identifying-errors" title="Permalink to this headline">¶</a></h2>
<p>Nextcloud uses custom error PHP handling that prevents errors being printed to Web server log files or command line output. Instead, errors are generally stored in Nextcloud&#8217;s own log file, located at: <code class="file docutils literal"><span class="pre">/data/nextcloud.log</span></code></p>
</div>
<div class="section" id="debugging-variables">
<h2>Debugging variables<a class="headerlink" href="#debugging-variables" title="Permalink to this headline">¶</a></h2>
<p>You should use exceptions if you need to debug variable values manually, and not alternatives like trigger_error() (which may not be logged).</p>
<p>e.g.:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span> <span class="k">throw</span> <span class="k">new</span> <span class="nx">\Exception</span><span class="p">(</span> <span class="s2">&quot;</span><span class="se">\$</span><span class="s2">user = </span><span class="si">$user</span><span class="s2">&quot;</span> <span class="p">);</span> <span class="c1">// should be logged in Nextcloud ?&gt;</span>
</pre></div>
</div>
<p>not:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span> <span class="nb">trigger_error</span><span class="p">(</span> <span class="s2">&quot;</span><span class="se">\$</span><span class="s2">user = </span><span class="si">$user</span><span class="s2">&quot;</span> <span class="p">);</span> <span class="c1">// may not be logged anywhere ?&gt;</span>
</pre></div>
</div>
<p>To disable custom error handling in Nextcloud (and have PHP and your Web server handle errors instead), see Debug mode.</p>
</div>
<div class="section" id="using-a-php-debugger-xdebug">
<h2>Using a PHP debugger (XDebug)<a class="headerlink" href="#using-a-php-debugger-xdebug" title="Permalink to this headline">¶</a></h2>
<p>Using a debugger connected to PHP allows you to step through code line by line, view variables at each line and even change values while the code is running. The de-facto standard debugger for PHP is XDebug, available as an installable package in many distributions. It just provides the PHP side however, so you will need a frontend to actually control XDebug. When installed, it needs to be enabled in <code class="file docutils literal"><span class="pre">php.ini</span></code>, along with some parameters to enable connections to the debugging interface:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">zend_extension</span><span class="o">=</span><span class="s">/usr/lib/php/modules/xdebug.so</span>
<span class="na">xdebug.remote_enable</span><span class="o">=</span><span class="s">on</span>
<span class="na">xdebug.remote_host</span><span class="o">=</span><span class="s">127.0.0.1</span>
<span class="na">xdebug.remote_port</span><span class="o">=</span><span class="s">9000</span>
<span class="na">xdebug.remote_handler</span><span class="o">=</span><span class="s">dbgp</span>
</pre></div>
</div>
<p>XDebug will now (when activated) try to connect to localhost on port 9000, and will communicate over the standard protocol DBGP. This protocol is supported by many debugging interfaces, such as the following popular ones:</p>
<ul class="simple">
<li>vdebug - Multi-language DBGP debugger client for Vim</li>
<li>SublimeTextXdebug - XDebug client for Sublime Text</li>
<li>PHPStorm - in-built DBGP debugger</li>
</ul>
<p>For further reading, see the XDebug documentation: <a class="reference external" href="http://xdebug.org/docs/remote">http://xdebug.org/docs/remote</a></p>
<p>Once you are familiar with how your debugging client works, you can start debugging with XDebug. To test Nextcloud through the web interface or other HTTP requests, set the <code class="docutils literal"><span class="pre">XDEBUG_SESSION_START</span></code> cookie or POST parameter. Alternatively, there are browser extensions to make this easy:</p>
<ul class="simple">
<li>The Easiest XDebug (Firefox): <a class="reference external" href="https://addons.mozilla.org/en-US/firefox/addon/the-easiest-xdebug/">https://addons.mozilla.org/en-US/firefox/addon/the-easiest-xdebug/</a></li>
<li>XDebug Helper (Chrome): <a class="reference external" href="https://chrome.google.com/extensions/detail/eadndfjplgieldjbigjakmdgkmoaaaoc">https://chrome.google.com/extensions/detail/eadndfjplgieldjbigjakmdgkmoaaaoc</a></li>
</ul>
<p>For debugging scripts on the command line, like <code class="docutils literal"><span class="pre">occ</span></code> or unit tests, set the <code class="docutils literal"><span class="pre">XDEBUG_CONFIG</span></code> environment variable.</p>
</div>
<div class="section" id="debugging-javascript">
<h2>Debugging JavaScript<a class="headerlink" href="#debugging-javascript" title="Permalink to this headline">¶</a></h2>
<p>By default all JavaScript files in Nextcloud are minified (compressed) into a single file without whitespace. To prevent this, see Debug mode.</p>
</div>
<div class="section" id="debugging-html-and-templates">
<h2>Debugging HTML and templates<a class="headerlink" href="#debugging-html-and-templates" title="Permalink to this headline">¶</a></h2>
<p>By default Nextcloud caches HTML generated by templates. This may prevent changes to app templates, for example, from being applied on page refresh. To disable caching, see Debug mode.</p>
</div>
<div class="section" id="using-alternative-app-directories">
<h2>Using alternative app directories<a class="headerlink" href="#using-alternative-app-directories" title="Permalink to this headline">¶</a></h2>
<p>It may be useful to have multiple app directories for testing purposes, so you can conveniently switch between different versions of applications. See the configuration file documentation for details.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="backporting.html" class="btn btn-neutral float-right" title="Backporting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="performance.html" class="btn btn-neutral float-left" title="Performance considerations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021 Nextcloud GmbH.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: 13
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.nextcloud.com/server/13/developer_manual">13</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/14/developer_manual">14</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/15/developer_manual">15</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/stable/developer_manual">stable</a></dd>
        
          <dd><a href="https://docs.nextcloud.com/server/latest/developer_manual">latest</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="///projects//?fromdocs=">Project Home</a>
          </dd>
          <dd>
            <a href="///builds//?fromdocs=">Builds</a>
          </dd>
      </dl>
    </div>
  </div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>